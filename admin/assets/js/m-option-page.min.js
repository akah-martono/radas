import{showSpinner as e,popupAlert as s,getFormValue as t}from"../../../lib/assets/js/m-general.min.js";import{adminFlashNotice as r}from"../../../lib/assets/js/m-admin.min.js";const o=jQuery;o(document).ready((()=>{let a;const n=document.querySelector("form");a=t(n),n.addEventListener("submit",(p=>{if(e(!0),p.preventDefault(),a==t(n))return s("No Update","You haven't changed the data"),void e(!1);const d=new FormData(n),i=wpApiSettings.root+n.getAttribute("data-endpoint");o.ajax({url:i,method:"post",data:d,processData:!1,contentType:!1,beforeSend:e=>{e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)},success:s=>{e(!1),r("success",s.message),a=t(n)},error:t=>{e(!1),t.hasOwnProperty("responseJSON")&&t.responseJSON.hasOwnProperty("message")?s("Save Failed",t.responseJSON.message):r("error",t.responseText,1e4)}})}))}));